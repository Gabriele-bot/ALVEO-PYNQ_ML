#-----------------------------------------------------------
# Vivado v2020.1 (64-bit)
# SW Build 2902540 on Wed May 27 19:54:35 MDT 2020
# IP Build 2902112 on Wed May 27 22:43:36 MDT 2020
# Start of session at: Mon Dec  6 11:16:56 2021
# Process ID: 1367
# Current directory: /home/gabri-bot/Vivado_projects/myproject_kernel_ex
# Command line: vivado -notrace -source /home/gabri-bot/Vivado_projects/Test_kernel/Test_kernel.srcs/sources_1/ip/myproject_kernel/myproject_kernel_ex.tcl
# Log file: /home/gabri-bot/Vivado_projects/myproject_kernel_ex/vivado.log
# Journal file: /home/gabri-bot/Vivado_projects/myproject_kernel_ex/vivado.jou
#-----------------------------------------------------------
start_gui
source /home/gabri-bot/Vivado_projects/Test_kernel/Test_kernel.srcs/sources_1/ip/myproject_kernel/myproject_kernel_ex.tcl -notrace
update_compile_order -fileset sources_1
set_property  ip_repo_paths  /home/gabri-bot/University/Git_hub/ALVEO-PYNQ_ML/NN_train/MNIST_Test/HLS_projects [current_project]
update_ip_catalog
delete_bd_objs [get_bd_intf_nets dma_0_m00_axis] [get_bd_intf_nets example_op_0_m_axis] [get_bd_cells example_op_0]
startgroup
create_bd_cell -type ip -vlnv xilinx.com:hls:myproject_axi:1.0 myproject_axi_0
endgroup
connect_bd_intf_net [get_bd_intf_pins myproject_axi_0/out_r] -boundary_type upper [get_bd_intf_pins dma_0/s00_axis]
connect_bd_intf_net [get_bd_intf_pins myproject_axi_0/in_r] -boundary_type upper [get_bd_intf_pins dma_0/m00_axis]
apply_bd_automation -rule xilinx.com:bd_rule:clkrst -config { Clk {/ap_clk (250 MHz)} Freq {100} Ref_Clk0 {} Ref_Clk1 {} Ref_Clk2 {}}  [get_bd_pins myproject_axi_0/ap_clk]
startgroup
create_bd_cell -type ip -vlnv xilinx.com:ip:axi_dma:7.1 dma_0/axi_dma_0
endgroup
set_property -dict [list CONFIG.c_include_sg {0} CONFIG.c_sg_include_stscntrl_strm {0}] [get_bd_cells dma_0/axi_dma_0]
startgroup
set_property -dict [list CONFIG.c_single_interface {1}] [get_bd_cells dma_0/axi_datamover_0]
endgroup
delete_bd_objs [get_bd_cells dma_0/axi_dma_0]
regenerate_bd_layout
validate_bd_design
# --------------------------------------------
# Start: RTL Kernel Packaging of Netlist
#
source -notrace /home/gabri-bot/Vivado_projects/myproject_kernel_ex/imports/package_kernel.tcl
# Running synthesis
reset_run synth_1
launch_runs synth_1 -jobs 4
wait_on_run [get_runs synth_1]
open_run synth_1 -name synth_1
rename_ref -prefix_all myproject_kernel_
write_checkpoint /home/gabri-bot/Vivado_projects/myproject_kernel_ex/myproject_kernel_ex.runs/synth_1/packaged.dcp
write_xdc /home/gabri-bot/Vivado_projects/myproject_kernel_ex/myproject_kernel_ex.runs/synth_1/packaged.xdc
close_design
package_project_dcp_and_xdc /home/gabri-bot/Vivado_projects/myproject_kernel_ex/myproject_kernel_ex.runs/synth_1/packaged.dcp /home/gabri-bot/Vivado_projects/myproject_kernel_ex/myproject_kernel_ex.runs/synth_1/packaged.xdc /home/gabri-bot/Vivado_projects/myproject_kernel_ex/myproject_kernel fastmachinelearning kernel myproject_kernel
package_xo  -xo_path /home/gabri-bot/Vivado_projects/myproject_kernel_ex/exports/myproject_kernel.xo -kernel_name myproject_kernel -ip_directory /home/gabri-bot/Vivado_projects/myproject_kernel_ex/myproject_kernel -kernel_xml /home/gabri-bot/Vivado_projects/myproject_kernel_ex/imports/kernel.xml
# Complete: RTL Kernel Packaging of Netlist
open_run synth_1 -name synth_1
